# EU5 Mod Agent 配置文件
# 支持多电脑、多环境使用

# ==================== 游戏路径配置 ====================
# 系统会按顺序尝试这些路径，找到第一个存在的
game_paths:
  - "C:\\Program Files (x86)\\Steam\\steamapps\\common\\Europa Universalis V"
  - "D:\\Steam\\steamapps\\common\\Europa Universalis V"
  - "E:\\Games\\Europa Universalis V"
  - "${STEAM_PATH}\\steamapps\\common\\Europa Universalis V"
  - "${EU5_PATH}"  # 可以设置环境变量

# 或者手动指定（优先级最高）
custom_game_path: null  # 例如: "D:\\MyGames\\EU5"

# ==================== 知识库配置 ====================
knowledge_base:
  # 向量数据库路径
  db_path: "knowledge-base/chroma-db"
  
  # 预构建知识库（便携版）
  prebuilt_db: "knowledge-base/eu5-kb-prebuilt.zip"
  
  # 是否使用预构建（跨电脑使用时设为true）
  use_prebuilt: false
  
  # Embedding模型配置
  embedding:
    # 选项: "openai" | "local-chinese" | "local-multilingual"
    type: "local-chinese"
    
    # OpenAI配置（如果使用openai）
    openai:
      api_key: "${OPENAI_API_KEY}"
      model: "text-embedding-3-large"
    
    # 本地模型配置
    local:
      chinese: "shibing624/text2vec-base-chinese"
      multilingual: "sentence-transformers/paraphrase-multilingual-mpnet-base-v2"
      cache_dir: "models/embeddings"

# ==================== RAG配置 ====================
rag:
  # 检索策略: "semantic" | "hybrid" | "dense"
  strategy: "hybrid"
  
  # 检索参数
  retrieval:
    top_k: 5
    similarity_threshold: 0.7
    
  # 混合检索权重（hybrid模式）
  hybrid_weights:
    semantic: 0.7
    keyword: 0.3
  
  # 重排序（提高检索质量）
  reranking:
    enabled: true
    model: "cross-encoder/ms-marco-MiniLM-L-6-v2"
    top_n: 3

# ==================== Agent配置 ====================
agent:
  # Agent类型: "conversational" | "react" | "function_calling"
  type: "function_calling"
  
  # 工作流配置
  workflows:
    enabled: true
    prompt_dir: "prompts/workflows"
  
  # 记忆配置
  memory:
    enabled: true
    type: "conversation_buffer_window"
    max_messages: 20
  
  # 工具配置
  tools:
    - name: "search_knowledge"
      enabled: true
    - name: "read_game_file"
      enabled: true
    - name: "create_country"
      enabled: true
    - name: "create_event"
      enabled: true
    - name: "validate_mod"
      enabled: true

# ==================== MCP配置 ====================
mcp:
  # 自动配置MCP（根据检测到的游戏路径）
  auto_configure: true
  
  # 服务器配置
  servers:
    game_files:
      enabled: true
      type: "filesystem"
    
    rag:
      enabled: true
      type: "custom"
      python_version_required: "3.10"
    
    mod_workspace:
      enabled: true
      type: "filesystem"

# ==================== 导出/导入配置 ====================
export:
  # 知识库导出设置
  include_in_export:
    - "knowledge-base/*.zip"
    - "prompts/**"
    - "config.yaml"
    - "scripts/**"
  
  # 压缩格式
  format: "zip"  # "zip" | "tar.gz"
  
  # 压缩级别 (1-9)
  compression_level: 6

# ==================== 日志配置 ====================
logging:
  level: "INFO"  # DEBUG | INFO | WARNING | ERROR
  file: "logs/eu5-agent.log"
  max_size: "10MB"
  backup_count: 3

